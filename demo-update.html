<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–µ–º–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .demo-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 8px; }
        button { padding: 10px 15px; margin: 5px; background: #007acc; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #005a9e; }
        .output { background: #f5f5f5; padding: 10px; margin: 10px 0; border-radius: 4px; font-family: monospace; }
        input[type="number"] { width: 80px; padding: 5px; margin: 2px; }
    </style>
</head>
<body>
    <h1>üîÑ –î–µ–º–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö</h1>
    <p>–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–∞–∫ –º–æ–∂–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤.</p>

    <div class="demo-section">
        <h3>üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤</h3>
        <p>–¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ:</p>
        <div id="current-incidents" class="output"></div>
        
        <h4>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –≥–æ–¥:</h4>
        <input type="number" id="new-year" placeholder="2026" value="2026">
        <input type="number" id="new-incidents" placeholder="5000" value="5000">
        <button onclick="addNewIncident()">–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ü–∏–¥–µ–Ω—Ç</button>

        <h4>–û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤:</h4>
        <button onclick="updateIncidentsExample()">–û–±–Ω–æ–≤–∏—Ç—å –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ</button>
        <button onclick="resetIncidentsData()">–°–±—Ä–æ—Å–∏—Ç—å –∫ –∏—Å—Ö–æ–¥–Ω—ã–º</button>
    </div>

    <div class="demo-section">
        <h3>üè¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ —Å–µ–∫—Ç–æ—Ä–æ–≤</h3>
        <p>–¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ:</p>
        <div id="current-sectors" class="output"></div>
        
        <button onclick="updateSectorsExample()">–û–±–Ω–æ–≤–∏—Ç—å –Ω–∞ –Ω–æ–≤—ã–µ —Å–µ–∫—Ç–æ—Ä–∞</button>
        <button onclick="resetSectorsData()">–°–±—Ä–æ—Å–∏—Ç—å –∫ –∏—Å—Ö–æ–¥–Ω—ã–º</button>
    </div>

    <div class="demo-section">
        <h3>üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞</h3>
        <button onclick="saveData()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ localStorage</button>
        <button onclick="loadData()">–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ localStorage</button>
        <button onclick="clearStorage()">–û—á–∏—Å—Ç–∏—Ç—å localStorage</button>
    </div>

    <div class="demo-section">
        <h3>üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</h3>
        <button onclick="openMainApp()">–û—Ç–∫—Ä—ã—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
        <p><em>–û—Ç–∫—Ä–æ–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ—Å—å –º–µ–∂–¥—É –≥—Ä–∞—Ñ–∏–∫–∞–º–∏, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!</em></p>
    </div>

    <div id="console-output" class="output" style="max-height: 200px; overflow-y: scroll;"></div>

    <script>
        // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º console.log –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            const output = document.getElementById('console-output');
            const time = new Date().toLocaleTimeString();
            output.innerHTML += `[${time}] ${args.join(' ')}\n`;
            output.scrollTop = output.scrollHeight;
        };

        // –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
        const originalIncidentsData = {
            years: [2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025],
            incidents: [1264, 1508, 2271, 2418, 2921, 3286, 3813, 4324]
        };

        const originalSectorsData = {
            sectors: ['–ì–æ—Å—É—á—Ä–µ–∂–¥–µ–Ω–∏—è', '–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç—å', '–ó–¥—Ä–∞–≤–æ–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ', '–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏', '–ù–∞—É–∫–∞ –∏ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ', 'IT-–∫–æ–º–ø–∞–Ω–∏–∏', '–î—Ä—É–≥–∏–µ', '–ë–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –æ—Ç—Ä–∞—Å–ª–∏', '–¢–æ—Ä–≥–æ–≤–ª—è', '–°–≤—è–∑—å'],
            values: [547, 516, 487, 427, 398, 321, 312, 306, 268, 232]
        };

        // –§—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏
        function updateDisplay() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
            document.getElementById('current-incidents').textContent = 
                `–ì–æ–¥—ã: ${originalIncidentsData.years.join(', ')}\n–ò–Ω—Ü–∏–¥–µ–Ω—Ç—ã: ${originalIncidentsData.incidents.join(', ')}`;
            
            document.getElementById('current-sectors').textContent = 
                `–°–µ–∫—Ç–æ—Ä—ã: ${originalSectorsData.sectors.length} —ç–ª–µ–º–µ–Ω—Ç–æ–≤\n–ó–Ω–∞—á–µ–Ω–∏—è: ${originalSectorsData.values.join(', ')}`;
        }

        function addNewIncident() {
            const year = parseInt(document.getElementById('new-year').value);
            const incidents = parseInt(document.getElementById('new-incidents').value);
            
            if (year && incidents) {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ—Å—Ç–º–µ—Å—Å–∞–≥–∏–Ω–≥ –¥–ª—è —Å–≤—è–∑–∏ —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
                const message = {
                    type: 'addIncident',
                    data: { year, incidents }
                };
                
                // –ï—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ –≤ –¥—Ä—É–≥–æ–º –æ–∫–Ω–µ
                if (window.opener) {
                    window.opener.postMessage(message, '*');
                }
                
                // –õ–æ–∫–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è –¥–µ–º–æ
                originalIncidentsData.years.push(year);
                originalIncidentsData.incidents.push(incidents);
                updateDisplay();
                
                console.log(`‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∏–Ω—Ü–∏–¥–µ–Ω—Ç: ${year} –≥–æ–¥ - ${incidents} –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤`);
            } else {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≥–æ–¥–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤');
            }
        }

        function updateIncidentsExample() {
            const newData = {
                years: [2020, 2021, 2022, 2023, 2024, 2025, 2026],
                incidents: [2500, 3000, 3500, 4200, 4800, 5500, 6200]
            };
            
            const message = {
                type: 'updateIncidents',
                data: newData
            };
            
            if (window.opener) {
                window.opener.postMessage(message, '*');
            }
            
            Object.assign(originalIncidentsData, newData);
            updateDisplay();
            
            console.log('‚úÖ –î–∞–Ω–Ω—ã–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–µ');
        }

        function resetIncidentsData() {
            const originalData = {
                years: [2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025],
                incidents: [1264, 1508, 2271, 2418, 2921, 3286, 3813, 4324]
            };
            
            const message = {
                type: 'updateIncidents',
                data: originalData
            };
            
            if (window.opener) {
                window.opener.postMessage(message, '*');
            }
            
            Object.assign(originalIncidentsData, originalData);
            updateDisplay();
            
            console.log('‚úÖ –î–∞–Ω–Ω—ã–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ —Å–±—Ä–æ—à–µ–Ω—ã –∫ –∏—Å—Ö–æ–¥–Ω—ã–º');
        }

        function updateSectorsExample() {
            const newData = {
                sectors: ['–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞', '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç', '–ë–∞–Ω–∫–∏', '–¢–µ–ª–µ–∫–æ–º', '–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ'],
                values: [850, 720, 680, 520, 430]
            };
            
            const message = {
                type: 'updateSectors',
                data: newData
            };
            
            if (window.opener) {
                window.opener.postMessage(message, '*');
            }
            
            Object.assign(originalSectorsData, newData);
            updateDisplay();
            
            console.log('‚úÖ –î–∞–Ω–Ω—ã–µ —Å–µ–∫—Ç–æ—Ä–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ –Ω–æ–≤—ã–µ');
        }

        function resetSectorsData() {
            const originalData = {
                sectors: ['–ì–æ—Å—É—á—Ä–µ–∂–¥–µ–Ω–∏—è', '–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç—å', '–ó–¥—Ä–∞–≤–æ–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ', '–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏', '–ù–∞—É–∫–∞ –∏ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ', 'IT-–∫–æ–º–ø–∞–Ω–∏–∏', '–î—Ä—É–≥–∏–µ', '–ë–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –æ—Ç—Ä–∞—Å–ª–∏', '–¢–æ—Ä–≥–æ–≤–ª—è', '–°–≤—è–∑—å'],
                values: [547, 516, 487, 427, 398, 321, 312, 306, 268, 232]
            };
            
            const message = {
                type: 'updateSectors',
                data: originalData
            };
            
            if (window.opener) {
                window.opener.postMessage(message, '*');
            }
            
            Object.assign(originalSectorsData, originalData);
            updateDisplay();
            
            console.log('‚úÖ –î–∞–Ω–Ω—ã–µ —Å–µ–∫—Ç–æ—Ä–æ–≤ —Å–±—Ä–æ—à–µ–Ω—ã –∫ –∏—Å—Ö–æ–¥–Ω—ã–º');
        }

        function saveData() {
            const message = { type: 'saveData' };
            
            if (window.opener) {
                window.opener.postMessage(message, '*');
            }
            
            console.log('üíæ –ö–æ–º–∞–Ω–¥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞');
        }

        function loadData() {
            const message = { type: 'loadData' };
            
            if (window.opener) {
                window.opener.postMessage(message, '*');
            }
            
            console.log('üìÇ –ö–æ–º–∞–Ω–¥–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞');
        }

        function clearStorage() {
            const message = { type: 'clearStorage' };
            
            if (window.opener) {
                window.opener.postMessage(message, '*');
            }
            
            console.log('üóëÔ∏è –ö–æ–º–∞–Ω–¥–∞ –æ—á–∏—Å—Ç–∫–∏ storage –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞');
        }

        function openMainApp() {
            window.open('index.html', '_blank');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateDisplay();
        console.log('üöÄ –î–µ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
        console.log('üìù –û—Ç–∫—Ä–æ–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!');
    </script>
</body>
</html>